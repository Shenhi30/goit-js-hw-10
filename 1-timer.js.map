{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport iziToast from 'izitoast';\n\nlet userSelectedDates = null;\n\nconst options = {\n    enableTime: true,\n    time_24hr: true,\n    defaultDate: new Date(),\n    minuteIncrement: 1,\n    onClose(selectedDates, _, instance) {\n        userSelectedDates = selectedDates[0];\n        console.log(selectedDates[0]);\n\n        if (Date.now() >= userSelectedDates) {\n            iziToast.error({\n                title: 'Error',\n                message: ' Please choose a date in the future',\n                position: 'topLeft',\n            });\n\n            refs.startBtn.disabled = true;\n        } else {\n            refs.startBtn.disabled = false;\n        }\n    },\n};\n\nflatpickr('#datetime-picker', options);\n\nconst refs = {\n    startBtn: document.querySelector('button'),\n    dataInput: document.querySelector('#datetime-picker'),\n    days: document.querySelector('[data-days]'),\n    hours: document.querySelector('[data-hours]'),\n    minutes: document.querySelector('[data-minutes]'),\n    seconds: document.querySelector('[data-seconds]'),\n};\n\nrefs.dataInput.disabled = false;\nrefs.startBtn.disabled = true;\n\nconst timer = {\n    deadline: null,\n    intervalId: null,\n\n    start() {\n        this.intervalId = setInterval(() => {\n            const difference = this.deadline - Date.now();\n\n            if (difference <= 0) {\n                this.stop();\n\n                refs.dataInput.disabled = false;\n                refs.startBtn.disabled = true;\n                return;\n            }\n\n            const { days, hours, minutes, seconds } = this.convertMs(difference);\n\n            refs.days.textContent = this.addLeadingZero(days);\n            refs.hours.textContent = this.addLeadingZero(hours);\n            refs.minutes.textContent = this.addLeadingZero(minutes);\n            refs.seconds.textContent = this.addLeadingZero(seconds);\n        }, 1000);\n    },\n\n    stop() {\n        clearInterval(this.intervalId);\n    },\n\n    convertMs(ms) {\n        // Number of milliseconds per unit of time\n        const second = 1000;\n        const minute = second * 60;\n        const hour = minute * 60;\n        const day = hour * 24;\n\n        // Remaining days\n        const days = Math.floor(ms / day);\n        // Remaining hours\n        const hours = Math.floor((ms % day) / hour);\n        // Remaining minutes\n        const minutes = Math.floor(((ms % day) % hour) / minute);\n        // Remaining seconds\n        const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n        return { days, hours, minutes, seconds };\n    },\n    addLeadingZero(value) {\n        return String(value).padStart(2, '0');\n    },\n};\n\n// console.log(timer);\n\nconst onStartBtnClick = () => {\n    timer.deadline = userSelectedDates;\n    timer.start();\n    refs.startBtn.disabled = true;\n    refs.dataInput.disabled = true;\n};\n\nrefs.startBtn.addEventListener('click', onStartBtnClick);"],"names":["userSelectedDates","options","selectedDates","_","instance","iziToast","refs","flatpickr","timer","difference","days","hours","minutes","seconds","ms","value","onStartBtnClick"],"mappings":"+IAGA,IAAIA,EAAoB,KAExB,MAAMC,EAAU,CACZ,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAeC,EAAGC,EAAU,CAChCJ,EAAoBE,EAAc,CAAC,EACnC,QAAQ,IAAIA,EAAc,CAAC,CAAC,EAExB,KAAK,IAAK,GAAIF,GACdK,EAAS,MAAM,CACX,MAAO,QACP,QAAS,sCACT,SAAU,SAC1B,CAAa,EAEDC,EAAK,SAAS,SAAW,IAEzBA,EAAK,SAAS,SAAW,EAEhC,CACL,EAEAC,EAAU,mBAAoBN,CAAO,EAErC,MAAMK,EAAO,CACT,SAAU,SAAS,cAAc,QAAQ,EACzC,UAAW,SAAS,cAAc,kBAAkB,EACpD,KAAM,SAAS,cAAc,aAAa,EAC1C,MAAO,SAAS,cAAc,cAAc,EAC5C,QAAS,SAAS,cAAc,gBAAgB,EAChD,QAAS,SAAS,cAAc,gBAAgB,CACpD,EAEAA,EAAK,UAAU,SAAW,GAC1BA,EAAK,SAAS,SAAW,GAEzB,MAAME,EAAQ,CACV,SAAU,KACV,WAAY,KAEZ,OAAQ,CACJ,KAAK,WAAa,YAAY,IAAM,CAChC,MAAMC,EAAa,KAAK,SAAW,KAAK,IAAG,EAE3C,GAAIA,GAAc,EAAG,CACjB,KAAK,KAAI,EAETH,EAAK,UAAU,SAAW,GAC1BA,EAAK,SAAS,SAAW,GACzB,MACH,CAED,KAAM,CAAE,KAAAI,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,EAAK,KAAK,UAAUJ,CAAU,EAEnEH,EAAK,KAAK,YAAc,KAAK,eAAeI,CAAI,EAChDJ,EAAK,MAAM,YAAc,KAAK,eAAeK,CAAK,EAClDL,EAAK,QAAQ,YAAc,KAAK,eAAeM,CAAO,EACtDN,EAAK,QAAQ,YAAc,KAAK,eAAeO,CAAO,CACzD,EAAE,GAAI,CACV,EAED,MAAO,CACH,cAAc,KAAK,UAAU,CAChC,EAED,UAAUC,EAAI,CAQV,MAAMJ,EAAO,KAAK,MAAMI,EAAK,KAAG,EAE1BH,EAAQ,KAAK,MAAOG,EAAK,MAAO,IAAI,EAEpCF,EAAU,KAAK,MAAQE,EAAK,MAAO,KAAQ,GAAM,EAEjDD,EAAU,KAAK,MAASC,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAJ,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACzC,EACD,eAAeE,EAAO,CAClB,OAAO,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,CACvC,CACL,EAIMC,EAAkB,IAAM,CAC1BR,EAAM,SAAWR,EACjBQ,EAAM,MAAK,EACXF,EAAK,SAAS,SAAW,GACzBA,EAAK,UAAU,SAAW,EAC9B,EAEAA,EAAK,SAAS,iBAAiB,QAASU,CAAe"}